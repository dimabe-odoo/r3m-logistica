<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="custom_sale_employee_tree_view" model="ir.ui.view">
            <field name="name">custom_sale_employee_tree_view</field>
            <field name="model">custom.sale_employee</field>
            <field name="arch" type="xml">
                <tree >
                    <field name="employee_id"/>
                    <field name="invoice_type"/>
                    <field name="invoice_id"/>
                    <field name="invoice_date"/>
                    <field name="payslip_id"/>
                    <field name="amount_total"/>
                    <field name="amount_residual"/>
                    <field name="state" widget="badge" decoration-success="state == 'paid_out'" decoration-info="state == 'to_pay'"/>
                </tree>
            </field>
        </record>

        <record id="custom_sale_employee_act_window" model="ir.actions.act_window">
            <field name="name">Ventas Internas</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">custom.sale_employee</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record id="custom_sale_employee_form_view" model="ir.ui.view">
            <field name="name">custom_sale_employee.from</field>
            <field name="model">custom.sale_employee</field>
            <field name="arch" type="xml">
              <form delete="false" create="false" edit="false" string="Venta Interna">
                  <sheet>
                      <group>
                          <field name="state" widget="badge" decoration-success="state == 'paid_out'" decoration-info="state == 'to_pay'" readonly="1"/>
                          <field name="employee_id" readonly="1"/>
                          <field name="payslip_id" readonly="1"/>
                          <field name="move_id" readonly="1"/>
                      </group>
                      <group>
                          <field name="invoice_type" readonly="1"/>
                          <field name="invoice_id" readonly="1"/>
                          <field name="invoice_date" readonly="1"/>
                          <field name="amount_total" readonly="1"/>
                          <field name="amount_residual" readonly="1"/>
                      </group>
                  </sheet>
              </form>
            </field>
        </record>

        <record id="custom_sale_employee_search_view" model="ir.ui.view">
            <field name="name">custom.sale_employee.search</field>
            <field name="model">custom.sale_employee</field>
            <field name="arch" type="xml">
                <search string="Venta Interna">
                    <field name="employee_id" string="Empleado"/>
                    <field name="invoice_id" string="Factura"/>
                    <group expand="1" string="Group By">
                        <filter string="Empleado" name="employee_id" domain="[]"
                                context="{'group_by':'employee_id'}"/>
                        <filter string="Estado" name="state" domain="[]"
                                context="{'group_by':'state'}"/>
                        <filter string="Pagado" name="state" domain="[('state','=','paid_out')]"/>
                        <filter string="Por Pagar" name="state" domain="[('state','=','to_pay')]"/>
                    </group>
                </search>
            </field>
        </record>

        <template id="sale_employee_button_render_js" inherit_id="web.assets_backend">
            <xpath expr="." position="inside">
                <script src="dimabe_rrhh/static/src/js/action_sale_employee.js" type="text/javascript"/>
            </xpath>
        </template>

        <menuitem name="Ventas Internas" id="custom_sale_employee_menu" parent="hr_work_entry_contract.menu_hr_payroll_root"
                  sequence="101" action="custom_sale_employee_act_window" groups="hr_payroll.group_hr_payroll_manager"/>

    </data>
</odoo>